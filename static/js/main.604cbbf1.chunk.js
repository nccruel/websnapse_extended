(this.webpackJsonpthesis=this.webpackJsonpthesis||[]).push([[0],{140:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},176:function(e,t,n){},181:function(e,t){},183:function(e,t){},211:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),s=n(13),i=n.n(s),c=(n(140),n(84)),l=n(10),u=n(17),d=n(11),b=n.n(d),h=n(16),p=n(6),j=n(42),f=(n(142),n(143),n(242)),O=n(120),g=n(68),m=n(225),x=n(228),y=n(229),v=n(244),w=n(121),S=n(232),k=n(131),C=n(233),N=n(122),I=n(245),E=n(230),_=n(231),T=n(226),A=n(234),D=n(235),R=n(236),M=n(237),B=n(238),P=n(239),L=n(240),J=n(241),W=n(85),H=n(99),F=n.n(H),G=n(9),z=[{selector:".snapse-node, .snapse-output, .snapse-input",style:{"font-family":"Computer Modern","background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top",color:"black",content:"data(label)"}},{selector:".snapse-node__closed",style:{"font-family":"Computer Modern","background-opacity":"0","padding-top":"0","border-width":0,"text-halign":"left","text-valign":"top","background-color":"gray",color:"black",content:"data(label)"}},{selector:".snapse-node__rules, .snapse-node__output, .snapse-node__input",style:{"font-family":"Computer Modern","font-style":"italic","background-color":"white","border-width":1,events:"no","text-wrap":"wrap","text-max-width":"100px","text-halign":"center","text-valign":"center",content:"data(label)",height:150,shape:"roundrectangle",width:100}},{selector:".snapse-node__rules__closed",style:{"font-family":"Computer Modern","font-style":"italic","background-color":"gray","border-width":3,events:"no","text-halign":"center","text-valign":"center","text-wrap":"wrap","text-max-width":"100px",content:"data(label)",height:150,shape:"roundrectangle",width:100}},{selector:".snapse-node__time, .snapse-node__spike",style:{"font-family":"Computer Modern","background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:".snapse-node__time__closed, .snapse-node__spike__closed",style:{"font-family":"Computer Modern","background-opacity":"0","text-halign":"center","text-valign":"center",content:"data(label)",events:"no",height:15,shape:"roundrectangle",width:50}},{selector:"edge",style:{"font-family":"Computer Modern","curve-style":"bezier","target-arrow-shape":"triangle","text-background-color":"white","text-background-shape":"rectangle",width:1}},{selector:".edge--triggering",style:(a={"line-color":"magenta","line-style":"dashed","target-arrow-color":"magenta"},Object(G.a)(a,"line-color","magenta"),Object(G.a)(a,"line-style","dashed"),Object(G.a)(a,"target-arrow-color","magenta"),Object(G.a)(a,"width",4),Object(G.a)(a,"line-dash-offset",3),Object(G.a)(a,"line-dash-pattern",[15,3]),Object(G.a)(a,"arrow-scale",1.5),a)},{selector:"edge[label]",css:{label:"data(label)","text-rotation":"autorotate","text-margin-x":"0px","text-margin-y":"0px","text-background-opacity":1,"font-weight":"bold","font-size":18}}],q=n(59),Y=n.n(q);var V=function(){var e=Object(o.useRef)(null);return Object(o.useEffect)((function(){var t,n=e.current,a=0;return function e(){a++,n&&n.edges().animate({style:{"line-dash-offset":-a}}),t=requestAnimationFrame(e)}(),function(){t&&cancelAnimationFrame(t)}}),[]),[e,function(t){e.current=t}]},U=function(e,t,n,a,o,r){return[{data:{id:e,label:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},position:{x:t,y:n},classes:"snapse-node"},{data:{id:e+"-rules",parent:e,label:a.replace(/ /g,"\n").replace(/->/g,"\u2192")},position:{x:t,y:n},classes:"snapse-node__rules"},{data:{id:e+"-spike",parent:e,label:o},position:{x:t,y:n-60},classes:"snapse-node__spike"},{data:{id:e+"-time",parent:e,label:"".concat(r<0?"!":r)},position:{x:t,y:n+90},classes:"snapse-node__time"}]},K=function(e,t,n,a,o){return[{data:{rootId:e,id:"".concat(e),label:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},classes:"snapse-output",position:{x:0,y:0}},{data:{rootId:e,id:"".concat(e,"-output"),parent:e,label:"".concat("string"===typeof a?a.replace(/\[object Object\]/g,"").replaceAll(/(.{12})/g,"$&\n"):"")},classes:"snapse-node__output",position:{x:t,y:n}},{data:{rootId:e,id:"".concat(e,"-spike"),parent:e,label:""},classes:"snapse-node__spike",position:{x:t,y:n+40}}]},X=function(e,t,n,a,o){return[{data:{id:e,label:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},position:{x:t,y:n},classes:"snapse-input"},{data:{rootId:e,id:"".concat(e,"-input"),parent:e,label:"".concat("string"===typeof a?a.replace(/\[object Object\]/g,"").replaceAll(/(.{12})/g,"$&\n"):"")},classes:"snapse-node__input",position:{x:t,y:n}}]},$=function(e){var t=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e)||/(a+)(\+*\**)\/(a+)->(0);(0)/.exec(e);return console.log(t),t},Q=function(e,t,n,a){return{data:{id:e+"->"+t,source:e,target:t,label:n,title:"synapse weight"},classes:a}},Z=function(e){for(var t=e.split(" "),n=0,a=0;a<t.length;a++)null!=$(t[a])?n+=1:console.log("invalidRule",t[a]);return n==t.length?1:0},ee=n(223),te=n(224),ne=n(1),ae=function(e){var t=e.neurons,n=e.onEdgeCreate,a=e.handleShowDeleteAll,r=e.handleChangePosition,s=e.setIsClickedSynapse,i=e.headless,c=!1,l=V(),u=Object(p.a)(l,2),d=u[0],b=u[1];var h=function(e){var t,n,a,o,r,s,i={nodes:[],edges:[],edgeIDs:new Set};for(var c in e){var l=e[c];if(l.currentRule){var u=(t=l.id,n=l.position.x,a=l.position.y,o=l.rules,r=l.spikes,s=l.delay,[{data:{id:t,label:"".concat(t.includes("-")?t.substr(0,t.indexOf("-")):t)},position:{x:n,y:a},classes:"snapse-node__closed"},{data:{id:t+"-rules",parent:t,label:o.replace(/ /g,"\n").replace(/->/g,"\u2192")},position:{x:n,y:a},classes:"snapse-node__rules__closed"},{data:{id:t+"-spike",parent:t,label:r},position:{x:n,y:a-60},classes:"snapse-node__spike__closed"},{data:{id:t+"-time",parent:t,label:s},position:{x:n,y:a+90},classes:"snapse-node__time__closed"}]);i.nodes.push(u[0]),i.nodes.push(u[1]),i.nodes.push(u[2]),i.nodes.push(u[3])}else if(l.isOutput||l.isInput)if(l.isInput){var d=X(l.id,l.position.x,l.position.y,l.bitstring);i.nodes.push(d[0]),i.nodes.push(d[1])}else{var b=K(l.id,l.position.x,l.position.y,l.bitstring);i.nodes.push(b[0]),i.nodes.push(b[1]),i.nodes.push(b[2])}else u=U(l.id,l.position.x,l.position.y,l.rules,l.spikes,l.delay),i.nodes.push(u[0]),i.nodes.push(u[1]),i.nodes.push(u[2]),i.nodes.push(u[3]);if(l.out)for(var h=0;h<l.out.length;h++)if(l.delay<0){var p,f=Object(j.a)(l.out);try{for(f.s();!(p=f.n()).done;){p.value;var O=Q(l.id,l.out[h],l.outWeights[l.out[h]]," edge--triggering");i.edges.push(O),i.edgeIDs.add(l.id+"->"+l.out[h])}}catch(m){f.e(m)}finally{f.f()}}else{var g=Q(l.id,l.out[h],l.outWeights[l.out[h]],"");i.edges.push(g),i.edgeIDs.add(l.id+"->"+l.out[h])}}return i}(t);return Object(o.useEffect)((function(){if(!i){var e=d.current;e&&(e.on("mouseup",".snapse-node, .snapse-output, .snapse-input",(function(e){console.log("change position",e.target.id()),r(e.position,e.target.id())})),e.on("click","edge",(function(e){var t=e.target.id();console.log("Edge ID:",t);var n=t.split("->"),a=n[0],o=n[1];s(c=!0,a,o),console.log("ISCLICK",c,a,o)})),e.on("mouseover",".snapse-node, .snapse-output, .snapse-input, edge",(function(e){})),e.on("click",(function(t){if(t.target==e)console.log("tap on background"),c=!1,console.log("EVT",e),s(c,".",".");else{var n=t.target.id();h.edgeIDs.has(n)?console.log("tap on edge"):(console.log("tap on some element"),s(c=!1,".","."))}})),e.gridGuide({guidelinesStyle:{strokeStyle:"black",horizontalDistColor:"#ff0000",verticalDistColor:"green",initPosAlignmentColor:"#0000ff"}}),e.edgehandles({handleNodes:".snapse-node, .snapse-node__closed, .snapse-input",preview:!1,loopAllowed:function(){return!1},edgeType:function(e,t){return"flat"},complete:n}))}}),[d,i]),i?Object(ne.jsx)("div",{id:"cyHeadless"}):Object(ne.jsxs)("div",{style:{width:"100%",height:"100%"},children:[Object(ne.jsxs)(w.a,{className:"center-graph-button",variant:"secondary",onClick:function(){var e=d.current;e&&(e.center(),e.fit(),e.zoom({level:.8,position:{x:100,y:100}}))},children:[Object(ne.jsx)(ee.a,{})," ","Center Graph"]}),Object(ne.jsxs)(w.a,{className:"clear-nodes-button",style:{float:"right"},variant:"danger",onClick:function(){a()},children:[Object(ne.jsx)(te.a,{})," ","Clear All"]}),Object(ne.jsx)(F.a,{cy:b,wheelSensitivity:.3,elements:F.a.normalizeElements(h),style:{width:"100%",height:"100%"},stylesheet:z})]})},oe=n(36),re=n.n(oe),se=n(49);function ie(e,t){/(a+)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e);var n=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(a+);([0-9]+)/.exec(e),a=/(a+)(\(*a*\)*)(\+*\**)\/(a+)->(0);(0)/.exec(e);if(n){var o=Object(p.a)(n,7),r=o[1],s=o[2],i=o[3],c=o[4],l=o[5],u=o[6],d=parseInt(u,10);return console.log({id:t,requires:r,grouped:s,symbol:i,consumes:c,produces:l,delay:u}),[r.length,s.length-2,i,c.length,l.length,d]}if(a){var b=Object(p.a)(a,7),h=b[1],j=b[2],f=b[3],O=b[4],g=b[5],m=b[6];return console.log({id:t,requires:h,grouped:j,symbol:f,consumes:O,produces:g,delay:m}),[h.length,j.length-2,f,O.length,0,0]}return!1}function ce(e,t,n,a){if("+"==n){if(t>0)return(a-e)%t==0&&a-e>=t;if(a>=e)return!0}else if("*"==n){if(t>0)return(a-e)%t==0;if(a>=e-1)return!0}else if(a==e)return!0;return!1}function le(e,t,n,a,o){var r=Object(se.a)(e,(function(e){var r={},s=[],i=[],c={},u=!0;for(var d in e){if(!(_=e[d]).currentRule&&!_.isOutput&&!_.isInput){delete e[_.id].chosenRule,delete e[_.id].currentRule;for(var b=_.rules.split(" "),h=[],f=0;f<b.length;f++){var O=ie(b[f],d),g=Object(p.a)(O,6),m=g[0],x=g[1],y=g[2],v=g[3],w=g[4],S=g[5];ce(m,x,y,_.spikes)&&(h.push(b[f]),u=!1)}if(1==h.length){e[_.id].currentRule=h[0],e[_.id].chosenRule=h[0];var k=ie(h[0],d),C=Object(p.a)(k,6);m=C[0],x=C[1],y=C[2],v=C[3],w=C[4],S=C[5];e[_.id].delay=S}else if(1==n&&h.length>1){var N=Math.floor(Math.random()*h.length),I=ie(h[N],d),E=Object(p.a)(I,6);m=E[0],x=E[1],y=E[2],v=E[3],w=E[4],S=E[5];e[_.id].currentRule=h[N],e[_.id].chosenRule=h[N],e[_.id].delay=S}else 0==n&&h.length>1&&(c[_.id]=h)}}if(Object.keys(c).length>0)return window.localStorage.setItem("shouldTimeStep","0"),void a(c);for(var d in e){var _=e[d],T=Object(l.a)({},_.outWeights);if(_.currentRule&&!T.isInput){if(u=!1,_.delay>=0){var A=_.delay.valueOf();A--,e[_.id].delay=A}if(console.log(_.delay),_.delay<0){var D=ie(_.currentRule,d),R=Object(p.a)(D,6),M=(m=R[0],x=R[1],y=R[2],v=R[3],w=R[4],S=R[5],_.spikes.valueOf());if(M-=v,e[_.id].spikes=M,_.out){var B,P=_.out,L=Object(j.a)(P);try{for(L.s();!(B=L.n()).done;){var J=B.value;r[J]=J in r?r[J]+w:w,r[J]=r[J]*T[J],console.log("Sent spikes from "+J+": "+r[J])}}catch($){L.e($)}finally{L.f()}}delete e[_.id].currentRule}}else if(_.isInput){var W=_.bitstring.length;if(i.push(_.id),_.out){var H,F=_.out,G=Object(j.a)(F);try{for(G.s();!(H=G.n()).done;){var z=H.value,q=_.bitstring[t],Y=0;if(console.log("Bit",q),t<W){var V=_.delay.valueOf();V--,e[_.id].delay=V,Y=parseInt(q)*T[z]}else e[_.id].delay=0;r[z]=Y,console.log("Sent spikes from IN",Y)}}catch($){G.e($)}finally{G.f()}}}else _.isOutput?(s.push(_.id),d in r||(r[d]=0)):-1!=_.delay||_.isInput||(e[_.id].delay=0)}for(var U in r){var K=e[U].spikes.valueOf();if(K+=r[U],e[U].spikes=K,e[U].isOutput){var X="".concat(e[U].bitstring).concat(r[U]||0);e[U].bitstring=X}}u&&o(),window.localStorage.setItem("shouldTimeStep","1")}));return localStorage.setItem(t+"sec",JSON.stringify(r)),r}function ue(e){return console.log("back step automata"),JSON.parse(localStorage.getItem(e+"sec"))}var de,be,he,pe,je=n(243),fe=function(e){var t=e.showChooseRuleModal,n=e.handleCloseChooseRuleModal,a=e.rules,r=e.handleChosenRules,s=Object(g.a)({}),i=Object(p.a)(s,2),c=i[0],l=i[1];function u(e,t){l((function(n){for(var a in n)a==t&&(n[a]=e.target.value)}))}Object(o.useEffect)((function(){l((function(e){for(var t in a)e[t]=a[t][0]}))}),[a]);for(var d=function(e,t){var n=t.map((function(e){return Object(ne.jsx)("option",{value:e,children:e},e)}));return Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{children:e}),Object(ne.jsx)(v.a.Control,{as:"select",value:c[e],onChange:function(t){return u(t,e)},children:n})]})},b=Object.keys(a),h=[],j=0;j<b.length;j++)console.log(j),h.push(d(b[j],a[b[j]]));return Object(ne.jsxs)(je.a,{show:t,onHide:n,backdrop:"static",keyboard:!1,children:[Object(ne.jsx)(je.a.Header,{children:Object(ne.jsx)(je.a.Title,{children:"Choose Rule Form"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),r(c)},children:[h,Object(ne.jsx)(w.a,{type:"submit",children:"Submit"})]})})]})},Oe=function(e){return Object(ne.jsx)(m.a,Object(l.a)(Object(l.a)({id:"button-tooltip",style:{width:"300px"}},e),{},{children:Object(ne.jsxs)("p",{children:[Object(ne.jsx)("b",{children:"Expression"}),": a",Object(ne.jsx)("sup",{children:"i"}),"(a",Object(ne.jsx)("sup",{children:"j"}),")",Object(ne.jsx)("sup",{children:"*"}),", where i and j cannot both be 0.",Object(ne.jsx)("br",{}),Object(ne.jsx)("b",{children:"Invalid Input"}),":",Object(ne.jsx)("br",{}),"a/a->1;1, a^2/a->a;1,",Object(ne.jsx)("br",{})," (a)a/a->a;1 ",Object(ne.jsx)("br",{}),Object(ne.jsx)("b",{children:"Valid Input"}),":",Object(ne.jsx)("br",{}),"a/a->a;1, aa/a->a;1,",Object(ne.jsx)("br",{})," a(a)/a->a;1"]})}))},ge=function(e,t){return t.reset?{id:"",startingSpikes:0,rules:""}:Object(l.a)(Object(l.a)({},e),{},Object(G.a)({},t.name,t.value))},me={id:"",rules:"",startingSpikes:0},xe=function(e){var t=e.showNewNodeModal,n=e.handleCloseModal,a=e.handleNewNode,r=e.handleError,s=function(){n()},i=Object(o.useReducer)(ge,me),c=Object(p.a)(i,2),l=c[0],u=c[1],d=Object(o.useState)(!1),b=Object(p.a)(d,2),h=(b[0],b[1]),j=function(e){u({name:e.target.name,value:e.target.value})};return Object(ne.jsxs)(je.a,{show:t,onHide:s,children:[Object(ne.jsx)(je.a.Header,{closeButton:!0,children:Object(ne.jsx)(je.a.Title,{children:"Create New Node"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){e.preventDefault();var t="".concat(l.id,"-").concat(re.a.generate());if(Z(l.rules)){console.log("All rules valid"),s(),h(!0),setTimeout((function(){h(!1),u({reset:!0})}),3e3);var n={id:t,position:{x:100,y:100},rules:l.rules,startingSpikes:parseInt(l.startingSpikes),delay:0,spikes:parseInt(l.startingSpikes),isOutput:!1,isInput:!1,out:[],outWeights:{}};a(n)}else console.log("One or more of the rules is invalid"),r("One or more of the rules is invalid"),s()},"data-testid":"new-node-form",children:[Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{htmlFor:"node-name",children:"Node Name"}),Object(ne.jsx)(v.a.Control,{required:!0,id:"node-name",name:"id",type:"text",placeholder:"n0",value:l.id,onChange:j})]}),Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{htmlFor:"node-rules",children:"Node Rules"}),Object(ne.jsx)(I.a,{placement:"right",delay:{show:250,hide:400},overlay:Oe,children:Object(ne.jsx)(T.a,{style:{"padding-left":"5px"}})}),Object(ne.jsx)(v.a.Control,{id:"node-rules",required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:l.rules,onChange:j}),Object(ne.jsx)(v.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{htmlFor:"starting-spikes",children:"Starting Spike Number"}),Object(ne.jsx)(v.a.Control,{id:"starting-spikes",required:!0,name:"startingSpikes",type:"number",min:"0",value:l.startingSpikes,onChange:j})]}),Object(ne.jsx)(w.a,{variant:"secondary",onClick:s,children:"Close"})," "," ",Object(ne.jsx)(w.a,{type:"submit",variant:"primary","data-testid":"new-node-submit-button",children:"Save Changes"})]})})]})},ye=function(e,t){return t.reset?{id:""}:Object(l.a)(Object(l.a)({},e),{},Object(G.a)({},t.name,t.value))},ve={id:""},we=function(e){var t=e.showAddWeightModal,n=e.handleCloseAddWeightModal,a=e.handleAddWeight,r=(e.handleError,e.srce),s=e.dest,i=function(){a(r,s,1),n()},c=Object(o.useState)(""),l=Object(p.a)(c,2),u=(l[0],l[1],Object(o.useReducer)(ye,ve)),d=Object(p.a)(u,2),b=d[0],h=d[1],j=Object(o.useState)(!1),f=Object(p.a)(j,2),O=(f[0],f[1]);return Object(ne.jsxs)(je.a,{show:t,onHide:i,children:[Object(ne.jsx)(je.a.Header,{closeButton:!0,children:Object(ne.jsx)(je.a.Title,{children:"Add Synapse Weight"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){e.preventDefault();var t=parseInt(b.weight);console.log("SOURCE",r),console.log("DEST",s),console.log("weight",t),i(),O(!0),setTimeout((function(){O(!1),h({reset:!0})}),3e3),a(r,s,t)},children:[Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsxs)(v.a.Label,{children:["Weight of the Synapse between ",r," and ",s,":"]}),Object(ne.jsx)(v.a.Control,{required:!0,name:"weight",type:"number",placeholder:"1",min:"1",value:b.weight,onChange:function(e){console.log(e.target.value),console.log(e.target.name),h({name:e.target.name,value:e.target.value})}})]}),Object(ne.jsx)(w.a,{variant:"secondary",onClick:i,children:"Close"})," "," ",Object(ne.jsx)(w.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},Se=function(e,t){return t.reset?{id:""}:Object(l.a)(Object(l.a)({},e),{},Object(G.a)({},t.name,t.value))},ke={id:""},Ce=function(e){var t=e.showNewOutputModal,n=e.handleCloseNewOutputModal,a=e.handleNewOutput,r=(e.handleError,function(){n()}),s=Object(o.useReducer)(Se,ke),i=Object(p.a)(s,2),c=i[0],l=i[1],u=Object(o.useState)(!1),d=Object(p.a)(u,2),b=(d[0],d[1]);return Object(ne.jsxs)(je.a,{show:t,onHide:r,children:[Object(ne.jsx)(je.a.Header,{closeButton:!0,children:Object(ne.jsx)(je.a.Title,{children:"Create New Node"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){e.preventDefault();var t="".concat(c.id,"-").concat(re.a.generate());r(),b(!0),setTimeout((function(){b(!1),l({reset:!0})}),3e3),a({id:t,position:{x:300,y:300},isOutput:!0,spikes:0,bitstring:" "})},children:[Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{children:"Output Node Name"}),Object(ne.jsx)(v.a.Control,{required:!0,name:"id",type:"text",placeholder:"n0",value:c.id,onChange:function(e){console.log(e.target.value),console.log(e.target.name),l({name:e.target.name,value:e.target.value})}})]}),Object(ne.jsx)(w.a,{variant:"secondary",onClick:r,children:"Close"})," "," ",Object(ne.jsx)(w.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},Ne=function(e,t){return t.reset?{id:""}:Object(l.a)(Object(l.a)({},e),{},Object(G.a)({},t.name,t.value))},Ie={id:""},Ee=function(e){var t=e.showNewInputModal,n=e.handleCloseNewInputModal,a=e.handleNewInput,r=(e.handleError,function(){n()}),s=Object(o.useReducer)(Ne,Ie),i=Object(p.a)(s,2),c=i[0],l=i[1],u=Object(o.useState)(!1),d=Object(p.a)(u,2),b=(d[0],d[1]),h=function(e){console.log(e.target.value),console.log(e.target.name),l({name:e.target.name,value:e.target.value})};return Object(ne.jsxs)(je.a,{show:t,onHide:r,children:[Object(ne.jsx)(je.a.Header,{closeButton:!0,children:Object(ne.jsx)(je.a.Title,{children:"Create New Node"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){e.preventDefault();var t="".concat(c.id,"-").concat(re.a.generate());r(),b(!0),setTimeout((function(){b(!1),l({reset:!0})}),3e3);var n={id:t,position:{x:300,y:300},isInput:!0,isOutput:!1,spikes:0,delay:0,out:[],bitstring:c.bitstring,outWeights:{}};a(n)},children:[Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{children:"Input Node Name"}),Object(ne.jsx)(v.a.Control,{required:!0,name:"id",type:"text",placeholder:"n0",value:c.id,onChange:h})]}),Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{children:" Bitstring/Spike Train"}),Object(ne.jsx)(v.a.Control,{required:!0,name:"bitstring",type:"text",placeholder:"101",value:c.bitstring,onChange:h})]}),Object(ne.jsx)(w.a,{variant:"secondary",onClick:r,children:"Close"})," "," ",Object(ne.jsx)(w.a,{type:"submit",variant:"primary",children:"Save Changes"})]})})]})},_e=function(e){var t=e.showEditModal,n=e.handleCloseEditModal,a=e.handleEditNode,r=e.handleError,s=e.neurons,i=Object(o.useState)(""),c=Object(p.a)(i,2),l=c[0],u=c[1],d=Object(o.useState)(""),b=Object(p.a)(d,2),h=b[0],j=b[1],f=Object(o.useState)(0),O=Object(p.a)(f,2),g=O[0],m=O[1],x=function(){u(null),j(null),m(null),n()};Object(o.useEffect)((function(){Object.keys(s).reduce((function(e,t){return s[t].isOutput||(e[t]=s[t]),e}),{})}),[]);var y=Object.keys(s).reduce((function(e,t){return s[t].isOutput||(e[t]=s[t]),e}),{}),S=Object.keys(y).map((function(e){return Object(ne.jsx)("option",{value:e,children:e},e)}));return Object(ne.jsxs)(je.a,{show:t,onHide:x,children:[Object(ne.jsx)(je.a.Header,{closeButton:!0,children:Object(ne.jsx)(je.a.Title,{children:"Edit Node"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){console.log(l,h,g),e.preventDefault(),console.log(l,h,g),l&&"-1"!=l?Z(h)?(console.log("All rules valid"),x(),setTimeout((function(){u(""),j(""),m(0)}),3e3),a(l,h,g)):(console.log("One or more of the rules is invalid"),r("One or more of the rules is invalid")):r("Please select a node to edit")},"data-testid":"edit-node-form",children:[Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{children:"Node"}),Object(ne.jsxs)(v.a.Control,{required:!0,"data-testid":"select-option",as:"select",defaultValue:-1,onChange:function(e){var t=e.target.value;u(t),j(s[t].rules),m(s[t].startingSpikes)},children:[Object(ne.jsx)("option",{disabled:!0,value:-1,children:"Select a node"},-1),S]})]}),Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{htmlFor:"node-rules",children:"Node Rules"}),Object(ne.jsx)(v.a.Control,{id:"node-rules",required:!0,name:"rules",type:"text",placeholder:"a/a->a;0 aa/a->a;1",value:h,onChange:function(e){j(e.target.value)}}),Object(ne.jsx)(v.a.Text,{className:"text-muted",children:"Enter valid rules only. Separate each rule with a space."})]}),Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{htmlFor:"startingSpikes",children:"Starting Spike Number"}),Object(ne.jsx)(v.a.Control,{id:"startingSpikes",required:!0,name:"startingSpikes",type:"number",min:"0",placeholder:"0",value:g,onChange:function(e){return m(e.target.value)}})]}),Object(ne.jsx)(w.a,{variant:"secondary",onClick:x,children:"Close"})," "," ",Object(ne.jsx)(w.a,{type:"submit",variant:"primary","data-testid":"edit-node-submit-button",children:"Save Changes"})]})})]})},Te=function(e){var t=e.showDeleteModal,n=e.handleCloseDeleteModal,a=e.handleDeleteNode,r=(e.handleError,e.neurons),s=Object(o.useState)(""),i=Object(p.a)(s,2),c=i[0],l=i[1],u=function(){n()},d=Object.keys(r).map((function(e){return Object(ne.jsx)("option",{value:e,children:e},e)})),b=Object.keys(r)[0];return Object(ne.jsxs)(je.a,{show:t,onHide:u,children:[Object(ne.jsx)(je.a.Header,{closeButton:!0,children:Object(ne.jsx)(je.a.Title,{children:"Delete Node"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),""!==c?(u(),setTimeout((function(){l("")}),3e3),a(c)):(u(),setTimeout((function(){l("")}),3e3),a(b))},children:[Object(ne.jsxs)(v.a.Group,{children:[Object(ne.jsx)(v.a.Label,{children:"Select node to delete"}),Object(ne.jsxs)(v.a.Control,{as:"select",defaultValue:-1,onChange:function(e){l(e.target.value)},children:[Object(ne.jsx)("option",{disabled:!0,value:-1,children:"Select a node"},-1),d]})]}),Object(ne.jsx)(w.a,{variant:"secondary",onClick:u,children:"Close"})," "," ",Object(ne.jsx)(w.a,{type:"submit",variant:"danger",children:"Delete neuron"})]})})]})},Ae=function(e){var t=e.showDeleteAllModal,n=e.handleCloseDeleteAllModal,a=e.handleDeleteAll,r=(e.handleError,Object(o.useState)("")),s=Object(p.a)(r,2),i=(s[0],s[1]),c=function(){n()};return Object(ne.jsxs)(je.a,{show:t,onHide:c,children:[Object(ne.jsx)(je.a.Header,{closeButton:!0,children:Object(ne.jsx)(je.a.Title,{children:"Clear All"})}),Object(ne.jsx)(je.a.Body,{children:Object(ne.jsxs)(v.a,{onSubmit:function(e){e.preventDefault(),c(),setTimeout((function(){i("")}),3e3),a()},children:[Object(ne.jsx)(v.a.Group,{children:Object(ne.jsx)(v.a.Label,{children:"Are you sure you want to delete all elements?"})}),Object(ne.jsx)(w.a,{type:"submit",variant:"danger",children:"YES"}),Object(ne.jsx)(w.a,{variant:"secondary",onClick:c,children:"NO"})," "," "]})})]})},De=n(227),Re=(n(176),function(e){return Object(ne.jsx)("td",{children:e})}),Me=function(e,t){return Object(ne.jsx)("tr",{children:e},"time-"+t)},Be=function(e){var t=e.time,n=e.showChoiceHistoryModal,a=e.handleCloseHoiceHistoryModal,o=JSON.parse(localStorage.getItem(t-1+"sec")),r=Object(ne.jsx)("td",{children:"There are no neurons"});o&&(r=Object.keys(o).map((function(e){return Object(ne.jsx)("th",{className:"choice-history-header",children:"".concat(e.includes("-")?e.substr(0,e.indexOf("-")):e)},e)})));for(var s=[],i=0;i<t;i++){var c=[];c.push(Object(ne.jsxs)("td",{className:"time",children:[" ",i," "]}));var l=JSON.parse(localStorage.getItem(i+"sec"));for(var u in l)l[u].chosenRule?c.push(Re(l[u].chosenRule.replace(/->/g,"\u2192"))):l[u].isOutput?c.push(Re("".concat("string"===typeof l[u].bitstring?l[u].bitstring.replace(/\[object Object\]/g,""):""))):c.push(Re("No applicable rule."));s.push(Me(c,i)),c=[]}return Object(ne.jsx)(je.a,{show:n,onHide:a,className:"custom-choice-history-modal",size:"lg",children:Object(ne.jsxs)(De.a,{className:"choicehistory",striped:!0,bordered:!0,hover:!0,"data-testid":"choice-history-table",children:[Object(ne.jsx)("thead",{children:Object(ne.jsxs)("tr",{children:[Object(ne.jsx)("th",{className:"headtime",children:"Time"}),r]})}),Object(ne.jsx)("tbody",{children:s})]})})},Pe=n(100),Le=n.n(Pe),Je=n(97),We=n(14),He=n(123),Fe=function(){var e=Object(o.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],r="Are you sure you want to exit without saving your system?";return Object(o.useEffect)((function(){return window.onbeforeunload=n&&function(){return r},function(){window.onbeforeunload=null}}),[n]),[Object(ne.jsx)(We.a,{when:n,message:r}),function(){return a(!0)},function(){return a(!1)}]},Ge=n(35),ze=[{target:".websnapse-title",title:"Welcome to WebSnapse!",content:"This is a visual simulator to aid in the creation and simulation of SN P systems.",placement:"center",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#dropdown-basic",title:"Node Actions",content:"Here we can find several actions you can do to create your SN P system.",placement:"right",offset:30,disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#new-node-btn",title:"New Node",content:"You can create a new neuron here. You will then be prompted to give it a label name, rules and the number of spikes the neuron should initially contain.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#new-node-btn",title:"Creating Rules",content:"When writing rules, it should follow the format E/c->p;d, where E follows the regular expression (a+)(+***), c is (a+) with length equal to the number of spikes consumed, p is (a+) with length equal to the number of spikes produced and d equal to the delay.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#new-output-btn",title:"New Output Node",content:"You can also create output neurons to receive the output of your system in the form of a bitstring, with the bits representing whether the output neuron  receives a spike or not at the given time.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#edit-node-btn",title:"Edit Node",content:"You can edit a neuron by choosing the neuron ID of the neuron you would like to edit. The neurons are ordered from oldest to last added. You can edit the rules and spikes of the neuron. You can choose to cancel or save the changes you made, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#del-node-btn",title:"Delete Node",content:"You can delete a neuron by choosing the neuron ID of the neuron you would like to delete. The neurons are ordered from oldest to last added. Deleting a neuron will also delete the synapses connected to the neuron. You can choose to cancel or save the changes you made, which will be seen right after.",placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".__________cytoscape_container",title:"The Workspace",content:"After adding a neuron, you will be able to see a visual representation here.  Inside each neuron, you will find the number of spikes the neuron has at the top, and its rules at the center. Below the neuron, you will find the current delay timer before the neuron spikes. By default, this is set to 0 and a neuron is set to spike at -1. ",placement:"bottom-start",offset:-400,disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".__________cytoscape_container",title:"Creating Edges",content:"To create s or edges,  hover over the source node or neuron then a grey circle will appear and you can drag that to see a directed arrow that you can connect to your desired next node or neuron. ",placement:"bottom-start",offset:-400,disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".snapse-controls",title:"Starting the Simulation",content:"Now it's time for simulations! You can simulate the system one step at a time by using the forward button. You can use the backward button to revert the system to the previous timestep.",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:".snapse-controls",title:"Starting the Simulation",content:"You can also simulate the system continuously by clicking the play button. It will then proceed to go step-by-step at 3 second intervals until the simulation is paused or the system halts.",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#formGridCheckbox",title:"Pseudorandom or Guided Mode",content:"If your system contains points of non-determinism, or rather, if a neuron can execute more than one rule at a time, you can choose to set the simulation to pseudorandom or guided mode. When using guided mode, you will be prompted to choose which rule the neuron should follow for that timestep. ",placement:"bottom",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#react-burger-menu-btn",title:"Menu Actions",content:"In this menu, you will find other actions such as saving/loading files, viewing the choice history and some sample systems.",placement:"right",offset:390,disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#custom-file",title:"Loading Files",content:"You can open pre-made or saved SNP Systems files in XML format.",offset:45,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#save-btn",title:"Saving Systems",content:"You can also save the current system you are working on. It will create an XML file.",offset:160,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#choice-history-btn",title:"Choice History",content:"Here you can view a table containing the rules each neuron applied per timestep.",offset:90,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},{target:"#file-dropdown",title:"Download Samples",content:"Lastly, you can download some of the sample SN P systems prepared here to start you off!",offset:65,placement:"right",disableBeacon:!0,disableOverlayClose:!0,floaterProps:{disableAnimation:!0}},(de={target:".websnapse-title",title:"Get Started",content:"And that's the end of the tutorial! Enjoy creating and simulating your own SN P systems!",placement:"center",disableBeacon:!0},Object(G.a)(de,"disableBeacon",!0),Object(G.a)(de,"floaterProps",{disableAnimation:!0}),de)],qe={key:new Date,run:!1,continuous:!0,loading:!1,stepIndex:0,steps:ze},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START":return Object(l.a)(Object(l.a)({},e),{},{run:!0});case"RESET":return Object(l.a)(Object(l.a)({},e),{},{stepIndex:0});case"STOP":return Object(l.a)(Object(l.a)({},e),{},{run:!1});case"NEXT_OR_PREV":return Object(l.a)(Object(l.a)({},e),t.payload);case"RESTART":return Object(l.a)(Object(l.a)({},e),{},{stepIndex:0,run:!0,loading:!1,key:new Date});default:return e}},Ve={beaconInner:{backgroundColor:"#786fa6"},tooltip:{backgroundColor:"#fff",textColor:"#333",fontSize:14},tooltipContainer:{textAlign:"center"},tooltipTitle:{fontSize:17,margin:"0 0 0 0"},buttonNext:{backgroundColor:"#786fa6"},buttonBack:{color:"#786fa6"},buttonSkip:{color:"#786fa6"},overlay:{backgroundColor:"rgba(0,0,0, 0.7)",mixBlendMode:"multiply"},spotlightLegacy:{boxShadow:"0 0 10 5 rgba(0,0,0, 0.5), 0 0 15px rgba(0, 0, 0, 0.3)"},floater:{arrow:{color:"#fff"},tooltip:{zIndex:100}}},Ue=function(e){var t=e.handleShowDropdownBasic,n=e.handleCloseDropdownBasic,a=e.handleShowSideBarMenu,r=e.handleCloseSideBarMenu,s=e.restartTutorial,i=e.handleFalseRestartTutorial,c=Object(o.useReducer)(Ye,qe),u=Object(p.a)(c,2),d=u[0],b=u[1];Object(o.useEffect)((function(){localStorage.getItem("tour")||b({type:"START"})}),[]);return Object(o.useEffect)((function(){1==s&&b({type:"RESTART"})}),[s]),Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsx)(Ge.d,Object(l.a)(Object(l.a)({},d),{},{callback:function(e){var o=e.action,s=e.index,c=e.type,l=e.status;o===Ge.a.CLOSE||l===Ge.c.SKIPPED&&d.run||l===Ge.c.FINISHED?b({type:"STOP"}):c===Ge.b.STEP_AFTER||c===Ge.b.TARGET_NOT_FOUND?b({type:"NEXT_OR_PREV",payload:{stepIndex:s+(o===Ge.a.PREV?-1:1)}}):0===s?r():1===s?(t(),i()):1===s&&o===Ge.a.PREV||7===s?n():12===s?a():17===s&&(r(),localStorage.setItem("tour","1"))},scrollToFirstStep:!0,showSkipButton:!0,hideBackButton:!1,showProgress:!0,continuous:!0,styles:Ve,locale:{last:"End tour",skip:"Skip tour"}}))})},Ke={compact:!0,ignoreComment:!0,spaces:4,sanitize:!1},Xe=3,$e=!1,Qe="",Ze="";function et(e,t){var n=Object(o.useRef)(!1),a=Object(o.useRef)(t),r=document.getElementsByTagName("input");Object(o.useEffect)((function(){var e,t=Object(j.a)(r);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.addEventListener("focusin",(function(){n.current=!0,console.log("fOCUS ON ME")})),a.addEventListener("input",(function(){n.current=!0,console.log("fOCUS ON ME 2")})),a.addEventListener("focus",(function(){n.current=!0,console.log("fOCUS ON ME 3")}),!0),a.addEventListener("focusout",(function(){n.current=!1}))}}catch(o){t.e(o)}finally{t.f()}})),Object(o.useEffect)((function(){a.current=t})),Object(o.useEffect)((function(){function t(t){console.log("isFocus ".concat(n.current)),t.code===e&&0==n.current&&(console.log("handleKeyDown isFocus: ".concat(n.current)),console.log("Key pressed: "+t.code),a.current(t))}return document.addEventListener("keydown",(function(e){"Space"===e.code&&0==n&&e.preventDefault()})),document.addEventListener("keydown",function(e,t){var n;return function(){for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,o),n=null}),e)}}(300,t)),function(){return document.removeEventListener("keydown",t)}}),[e])}var tt=Object(W.c)(be||(be=Object(c.a)(["\nfrom {\n  transform: scaleX(100%);\n}\n\nto {\n  transform: scaleX(0%);\n}\n"]))),nt=W.b.div(he||(he=Object(c.a)(["\n","\nbackground-color: #c44569;\nheight: 4px;\ntransform-origin: left center;\nmargin-bottom: 2px;\n"])),(function(e){return e.isPlaying&&Object(W.a)(pe||(pe=Object(c.a)(["\n    animation: "," ","s linear; \n  "])),tt,Xe)})),at=function(){var e=Object(g.a)(null!=window.localStorage.getItem("originalNeurons")?JSON.parse(window.localStorage.getItem("originalNeurons")):{n1:{id:"n1",position:{x:50,y:50},rules:"a+/a->a;2",startingSpikes:1,delay:0,spikes:1,isOutput:!1,out:["n2"],outWeights:{n2:1}},n2:{id:"n2",position:{x:200,y:50},rules:"a/a->a;1",startingSpikes:0,delay:0,spikes:0,isOutput:!1,out:["n3"],outWeights:{n3:1}},n3:{id:"n3",position:{x:400,y:50},rules:"a/a->a;0",startingSpikes:1,delay:0,spikes:1,isOutput:!1,out:["n4"],outWeights:{n4:1}},n4:{id:"n4",position:{x:400,y:200},isOutput:!0,spikes:0,bitstring:" "}}),t=Object(p.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),s=Object(p.a)(r,2),i=s[0],c=s[1],d=Object(o.useState)(""),j=Object(p.a)(d,2),W=j[0],H=j[1],F=Object(o.useState)(0),G=Object(p.a)(F,2),z=G[0],q=G[1],Y=Object(o.useState)(!1),V=Object(p.a)(Y,2),U=(V[0],V[1],Object(o.useState)(!0)),K=Object(p.a)(U,2),X=K[0],$=K[1],Q=Object(o.useState)(""),Z=Object(p.a)(Q,2),ee=Z[0],te=Z[1],oe=Fe(),re=Object(p.a)(oe,3),se=re[0],ce=re[1],de=re[2],be=Object(o.useState)(!1),he=Object(p.a)(be,2),pe=he[0],je=he[1],Oe=Object(o.useState)(!1),ge=Object(p.a)(Oe,2),me=ge[0],ye=ge[1],ve=Object(o.useState)(!1),Se=Object(p.a)(ve,2),ke=Se[0],Ne=Se[1],Ie=Object(o.useState)(!1),De=Object(p.a)(Ie,2),Re=De[0],Me=De[1],Pe=Object(o.useState)(!1),Ge=Object(p.a)(Pe,2),ze=Ge[0],qe=Ge[1],Ye=Object(o.useState)(!1),Ve=Object(p.a)(Ye,2),tt=Ve[0],at=Ve[1],ot=Object(o.useState)(!1),rt=Object(p.a)(ot,2),st=rt[0],it=rt[1],ct=Object(o.useState)(!1),lt=Object(p.a)(ct,2),ut=lt[0],dt=lt[1],bt=Object(o.useState)(!1),ht=Object(p.a)(bt,2),pt=ht[0],jt=ht[1],ft=Object(o.useState)(!1),Ot=Object(p.a)(ft,2),gt=Ot[0],mt=Ot[1],xt=Object(o.useState)(!1),yt=Object(p.a)(xt,2),vt=yt[0],wt=yt[1],St=Object(o.useState)(!1),kt=Object(p.a)(St,2),Ct=kt[0],Nt=kt[1],It=Object(o.useState)(!1),Et=Object(p.a)(It,2),_t=Et[0],Tt=Et[1],At=Object(o.useState)(""),Dt=Object(p.a)(At,2),Rt=Dt[0],Mt=Dt[1],Bt=Object(o.useState)(0),Pt=Object(p.a)(Bt,2),Lt=Pt[0],Jt=Pt[1],Wt=Object(o.useState)(1),Ht=Object(p.a)(Wt,2),Ft=Ht[0],Gt=Ht[1],zt=function(){return dt(!0)},qt=function(){return qe(!1)},Yt=Object(o.useState)(!1),Vt=Object(p.a)(Yt,2),Ut=Vt[0],Kt=Vt[1],Xt=function(){Tt(!0),Nt(!1),console.log("alert from simulationEnd"),alert("Simulation has ended.")},$t=function(e){Mt(e),setTimeout((function(){Mt("")}),3e3)},Qt=function(){var e=Object(h.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(t),H(n),console.log("newEdge",t,n),e.next=5,a((function(e){var a=Object(u.a)(e[t].out),o=Object(l.a)({},e[t].outWeights)[n];a.includes(n)?tn(t,n,o+1):(je(!0),a.push(n),console.log(a),e[t].out=a)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Zt(e,t){return en.apply(this,arguments)}function en(){return(en=Object(h.a)(b.a.mark((function e(t,o){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){var n=Object(u.a)(e[t].out);console.log("OLD OUT DETAILS ",n);var a=Object(l.a)({},e[t].outWeights);if(console.log("WEIGHTS DETAILS",a),a[o]>1)e[t].outWeights[o]=a[o]-1;else{var r=e[t].out.filter((function(e){return e!==o}));e[t].out=r,delete e[t].outWeights[o]}var s=Object(u.a)(e[t].out);console.log("NEW OUT DETAILS ",s);var i=Object(l.a)({},e[t].outWeights);console.log("WEIGHTS DETAILS",i),console.log("DELETED SYNAPSE")}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tn(e,t,n){return nn.apply(this,arguments)}function nn(){return(nn=Object(h.a)(b.a.mark((function e(t,o,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){var n=Object(l.a)({},e[t].outWeights);n[o]=r,e[t].outWeights=n,console.log("WEIGHTS",n)}));case 2:c(""),H(""),ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var an=function(){var e=Object(h.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a((function(e){e[n].position=t})),ce(!0);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function on(){return(on=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t.id]=t}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rn(){return(rn=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t.id]=t}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sn(){return(sn=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t.id]=t}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cn(){return(cn=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zt();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ln(){return(ln=Object(h.a)(b.a.mark((function e(t,o,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a((function(e){e[t].startingSpikes=r,e[t].spikes=r,e[t].rules=o}));case 2:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function un(){return(un=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleDeleteNode",t),e.next=3,a((function(e){for(var n in e){var a=e[n];if(!a.isOutput&&a.out){var o=a.out.filter((function(e){return e!==t}));e[n].out=o}}delete e[t]}));case 3:ce(!0),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(){return(dn=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a((function(e){for(var t in e)delete e[t]})),ce(!0),console.log("ALL DELETED",n),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bn=function(){if(0!=z){a((function(e){return JSON.parse(window.localStorage.getItem("originalNeurons"))})),q(0),Nt(!1),Tt(!1);var e=window.localStorage.getItem("originalNeurons");window.localStorage.clear(),window.localStorage.setItem("originalNeurons",e)}},hn=Object(o.useState)({}),pn=Object(p.a)(hn,2),jn=pn[0],fn=pn[1],On=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fn(t);case 2:qe(!0),qe&&Nt(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gn=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==z&&(console.log("Time is: "+z),window.localStorage.setItem("originalNeurons",JSON.stringify(JSON.parse(JSON.stringify(n)))),window.localStorage.setItem("shouldTimeStep","1"),console.log("Original neurons on time = 1 ",window.localStorage.getItem("originalNeurons"))),_t){e.next=9;break}return console.log("Time is: "+z),e.next=5,a((function(e){return le(e,z,X,On,Xt)}));case 5:"1"==window.localStorage.getItem("shouldTimeStep")&&q((function(e){return e+1})),console.log("Local storage space used: ".concat(2*JSON.stringify(localStorage).length)),e.next=10;break;case 9:alert("Simulation has ended.");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mn=function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(z>1)){e.next=9;break}return t=z.valueOf(),Tt(!1),e.next=5,a((function(e){return ue(t-2)}));case 5:return e.next=7,q((function(e){return e-1}));case 7:e.next=10;break;case 9:1==z&&bn();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useRef)(n).current=n;var xn=Object(o.useRef)(gn);function yn(){$e?Zt(Qe,Ze):console.log("No edge clicked."),console.log("Delete/Bspace Pressed")}return xn.current=function(){gn(),Jt((function(e){return e+1}))},Object(o.useEffect)((function(){var e=3e3/Ft;if(Xe=e/1e3,console.log("Simu speed",e),Ct)var t=setInterval((function(){xn.current()}),e);return function(){return clearInterval(t)}}),[Ct,xn]),Object(o.useEffect)((function(){ze&&console.log("showChooseRuleModal is true")}),[]),et("Space",(function(){console.log("Space Pressed"),Nt((function(e){return!e}))})),et("ArrowLeft",(function(){console.log("Left Key Pressed"),mn()})),et("ArrowRight",(function(){console.log("Right Key Pressed"),_t||xn.current()})),et("Delete",yn),et("Backspace",yn),Object(ne.jsxs)(Je.a,{children:[Object(ne.jsx)(Ue,{handleShowDropdownBasic:function(){return mt(!0)},handleCloseDropdownBasic:function(){return mt(!1)},handleShowSideBarMenu:function(){return wt(!0)},handleCloseSideBarMenu:function(){return wt(!1)},restartTutorial:Ut,handleFalseRestartTutorial:function(){return Kt(!1)}}),Object(ne.jsx)(We.d,{children:Object(ne.jsx)(We.b,{path:"/",children:Object(ne.jsxs)(x.a,{children:[Rt&&Object(ne.jsx)(y.a,{variant:"danger",children:Rt}),Object(ne.jsxs)(O.slide,{id:"side-bar-menu",isOpen:vt,onClick:function(){wt(!vt)},disableCloseOnEsc:!0,disableOverlayClick:!0,noOverlay:!0,children:[Object(ne.jsx)(v.a,{children:Object(ne.jsx)(v.a.File,{id:"custom-file",label:ee||"Load file...",custom:!0,onChange:function(e){!function(t){var n=t.files[0];if(Tt(!1),n.type&&-1===n.type.indexOf("text/xml"))$t("File is not a xml file");else{var o=new FileReader,r=function(){var t=Object(h.a)(b.a.mark((function t(n,a){var o,r,i,c,l,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{o=Object.keys(a._parent),r=o.length,i=o[r-1],(c=a._parent[i]).length>0?(l=c,u=c.length-1,l[u]=n):"out"==i?a._parent[i]=[n]:"bitstring"==i?(console.log("bitstring"),a._parent[i]=""):a._parent[i]=s(n)}catch(e){}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();o.addEventListener("load",function(){var e=Object(h.a)(b.a.mark((function e(t){var o,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={compact:!0,trim:!0,ignoreDeclaration:!0,ignoreInstruction:!0,ignoreAttributes:!0,ignoreComment:!0,ignoreCdata:!0,ignoreDoctype:!0,textFn:r},e.next=3,Le.a.xml2js(t.target.result,o);case 3:return s=e.sent,e.next=6,a((function(e){return s.content}));case 6:return e.next=8,a((function(e){for(var t in e)e[t].bitstring&&(console.log(e[t].bitstring),e[t].bitstring=" "),e[t].isOutput||e[t].out||(e[t].out=[])}));case 8:window.localStorage.setItem("originalNeurons",JSON.stringify(s.content)),te(n.name);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.readAsText(n),q(0)}function s(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}}(e.target)}})}),Object(ne.jsx)("div",{children:Object(ne.jsxs)(w.a,{id:"save-btn",variant:"primary",disabled:z>0,onClick:function(){var e={content:n},t=Le.a.json2xml(e,Ke),a=new Blob([t],{type:"text/xml;charset=utf-8"});Object(He.saveAs)(a,Date().toString()+"-Neurons.xmp"),de()},children:[Object(ne.jsx)(E.a,{})," ","Save"]})}),Object(ne.jsx)("div",{children:Object(ne.jsxs)(w.a,{id:"choice-history-btn",variant:"primary",onClick:function(){it(!0),wt(!1)},children:[Object(ne.jsx)(_.a,{})," ","Choice History"]})}),Object(ne.jsx)("div",{children:Object(ne.jsxs)(S.a,{id:"file-dropdown",title:"Download samples",children:[Object(ne.jsx)(k.a.Item,{href:"./samples/3k+3 spiker.xmp",download:!0,children:"3k+3 Spiker"}),Object(ne.jsx)(k.a.Item,{href:"./samples/bitadder.xmp",download:!0,children:"Bitadder"}),Object(ne.jsx)(k.a.Item,{href:"./samples/increasing comparator.xmp",download:!0,children:"Increasing Comparator"}),Object(ne.jsx)(k.a.Item,{href:"./samples/naturally even.xmp",download:!0,children:"Naturally Even"}),Object(ne.jsx)(k.a.Item,{href:"./samples/naturally greater one.xmp",download:!0,children:"Naturally Greater One"})]})}),Object(ne.jsx)("div",{children:Object(ne.jsx)(w.a,{id:"restart-tour",variant:"primary",onClick:function(){return Kt(!0)},children:"Restart Tutorial"})})]}),Object(ne.jsxs)("div",{children:[Object(ne.jsx)("div",{style:{textAlign:"center"},children:Object(ne.jsx)("h1",{style:{fontWeight:"700"},className:"websnapse-title",children:"WebSnapse"})}),Object(ne.jsxs)(C.a,{children:[Object(ne.jsx)(N.a,{children:Object(ne.jsxs)("div",{children:[Object(ne.jsx)(v.a,{children:Object(ne.jsx)(v.a.Group,{id:"formGridCheckbox",children:Object(ne.jsxs)(C.a,{children:[Object(ne.jsx)(N.a,{sm:8,children:Object(ne.jsx)(v.a.Check,{type:"checkbox",label:"Pseudorandom Mode",defaultChecked:X,onChange:function(){$(!X)}})}),Object(ne.jsx)(N.a,{sm:1,style:{textAlign:"left"},children:Object(ne.jsx)(I.a,{placement:"right",delay:{show:250,hide:400},overlay:function(e){return Object(ne.jsx)(m.a,Object(l.a)(Object(l.a)({id:"button-tooltip"},e),{},{children:"Pseudorandom will allow the system to decide which rule will be executed. Unchecking it will let you decide."}))},children:Object(ne.jsx)(T.a,{})})})]})})}),0==z?Object(ne.jsx)("div",{}):Object(ne.jsxs)("div",{style:{backgroundColor:"#778beb",color:"white",borderRadius:"10px",padding:"0.5em"},children:[Object(ne.jsx)(A.a,{color:"white",size:30})," ",Object(ne.jsx)("strong",{children:"Time:"})," ",0==z?"Start playing!":z]})]})}),Object(ne.jsxs)(N.a,{children:[Object(ne.jsxs)("div",{className:"snapse-controls",style:{textAlign:"center",marginBottom:"0.8em"},children:[Object(ne.jsx)(w.a,{variant:"link",onClick:mn,children:Object(ne.jsx)(D.a,{})})," ",Object(ne.jsxs)("div",{style:{display:"inline-block"},children:[Object(ne.jsx)(nt,{isPlaying:Ct},Lt),Object(ne.jsx)(w.a,{size:"lg",className:"snapse-controls-play",onClick:function(){_t?alert("Simulation has ended."):(console.log("isPlaying before ".concat(Ct)),Nt((function(e){return!e})),console.log("isPlaying after ".concat(Ct)))},children:Ct?Object(ne.jsx)(R.a,{}):Object(ne.jsx)(M.a,{})})]})," "," ",Object(ne.jsx)(w.a,{variant:"link",onClick:function(){return gn()},children:Object(ne.jsx)(B.a,{})})," "]}),Object(ne.jsx)("div",{style:{textAlign:"center"},children:Object(ne.jsxs)(k.a,{show:gt,onClick:function(){mt(!gt)},children:[Object(ne.jsxs)(k.a.Toggle,{id:"dropdown-basic",children:[Object(ne.jsx)(P.a,{})," ","Node Actions"]})," ",Object(ne.jsxs)(k.a.Menu,{children:[Object(ne.jsx)(k.a.Item,{id:"new-node-btn",children:Object(ne.jsx)(w.a,{variant:"link",size:"sm",className:"node-actions text-primary",onClick:function(){return ye(!0)},disabled:z>0,children:"New Node"})}),Object(ne.jsx)(k.a.Item,{id:"new-input-btn",children:Object(ne.jsx)(w.a,{variant:"link",size:"sm",className:"node-actions text-primary",onClick:function(){return Me(!0)},disabled:z>0,children:"New Input Node"})}),Object(ne.jsx)(k.a.Item,{id:"new-output-btn",children:Object(ne.jsx)(w.a,{variant:"link",size:"sm",className:"node-actions text-primary",onClick:function(){return Ne(!0)},disabled:z>0,children:"New Output Node"})}),Object(ne.jsx)(k.a.Item,{id:"edit-node-btn",children:Object(ne.jsx)(w.a,{variant:"link",size:"sm",className:"node-actions text-info",onClick:function(){return at(!0)},disabled:z>0,children:"Edit"})}),Object(ne.jsx)(k.a.Item,{id:"del-node-btn",children:Object(ne.jsx)(w.a,{variant:"link",size:"sm",className:"node-actions text-danger",onClick:function(){return jt(!0)},disabled:z>0,children:"Delete"})})]})]})})]}),Object(ne.jsxs)(N.a,{style:{textAlign:"right"},children:[Object(ne.jsxs)(w.a,{variant:"danger",onClick:bn,style:{textAlign:"center",marginBottom:"0.4em"},children:[Object(ne.jsx)(L.a,{})," ","Restart Simulation"]})," ",Object(ne.jsxs)("div",{style:{backgroundColor:"#786fa6",borderRadius:"10px",padding:"0.5em"},children:[Object(ne.jsxs)("h6",{className:"slider-title",style:{textAlign:"center"},children:[Object(ne.jsx)(J.a,{})," ","Simulation Speed",Object(ne.jsx)(w.a,{size:"sm",variant:"light",style:{float:"right"},onClick:function(){Ct&&Nt(!1),Gt(1)},children:"Reset to 1x"})," "]}),Object(ne.jsx)(f.a,{"aria-label":"simuSpeed",color:"secondary",min:.1,max:3,step:.1,defaultValue:1,value:Ft,onChange:function(e,t){Ct&&Nt(!1),Gt(t),Xe=3e3/t/1e3},valueLabelDisplay:"auto",valueLabelFormat:function(e){return"".concat(e,"x")}})]})]})]})]}),Object(ne.jsx)("hr",{}),Object(ne.jsx)(ae,{neurons:n,onEdgeCreate:function(e,t,n){Qt(e.id(),t.id()),n.remove()},handleChangePosition:an,handleDeleteSynapse:Zt,setIsClickedSynapse:function(e,t,n){$e=e,Qe=t,Ze=n},handleShowDeleteAll:function(){return cn.apply(this,arguments)},headless:!1}),Object(ne.jsx)(Be,{time:z,showChoiceHistoryModal:st,handleCloseHoiceHistoryModal:function(){return it(!1)}}),Object(ne.jsx)(we,{showAddWeightModal:pe,handleCloseAddWeightModal:function(){return je(!1)},handleAddWeight:tn,handleError:$t,srce:i,dest:W}),Object(ne.jsx)(xe,{showNewNodeModal:me,handleCloseModal:function(){return ye(!1)},handleNewNode:function(e){return on.apply(this,arguments)},handleError:$t}),Object(ne.jsx)(Ce,{showNewOutputModal:ke,handleCloseNewOutputModal:function(){return Ne(!1)},handleNewOutput:function(e){return rn.apply(this,arguments)},handleError:$t}),Object(ne.jsx)(Ee,{showNewInputModal:Re,handleCloseNewInputModal:function(){return Me(!1)},handleNewInput:function(e){return sn.apply(this,arguments)},handleError:$t}),Object(ne.jsx)(_e,{showEditModal:tt,handleCloseEditModal:function(){return at(!1)},handleEditNode:function(e,t,n){return ln.apply(this,arguments)},handleError:$t,neurons:n}),Object(ne.jsx)(Ae,{showDeleteAllModal:ut,handleCloseDeleteAllModal:function(){return dt(!1)},handleDeleteAll:function(){return dn.apply(this,arguments)},handleError:$t}),Object(ne.jsx)(Te,{showDeleteModal:pt,handleCloseDeleteModal:function(){return jt(!1)},handleDeleteNode:function(e){return un.apply(this,arguments)},handleError:$t,neurons:n}),Object(ne.jsx)(fe,{showChooseRuleModal:ze,handleCloseChooseRuleModal:qt,rules:jn,handleChosenRules:function(e){qt(),a((function(t){for(var n in t)for(var a in e)if(n==a){var o=ie(e[a]),r=Object(p.a)(o,6),s=(r[0],r[1],r[2],r[3],r[4],r[5]);t[n].delay=s,t[n].currentRule=e[a],t[n].chosenRule=e[a]}}))}}),se]})})})]})},ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,246)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),r(e),s(e)}))},rt=n(129),st=n.n(rt),it=n(130),ct=n.n(it);Y.a.use(st.a),Y.a.use(ct.a),i.a.render(Object(ne.jsx)(r.a.StrictMode,{children:Object(ne.jsx)(at,{})}),document.getElementById("root")),ot()}},[[211,1,2]]]);
//# sourceMappingURL=main.604cbbf1.chunk.js.map